import{j as e,r as t,a as J}from"./react-4df190a1.js";import{c as Ue}from"./react-dom-241e1921.js";import{L as b,u as ze,N as Ve,B as Ge}from"./react-router-dom-67628f57.js";import{u as P,a as q,P as Ye}from"./react-redux-5ff7a97d.js";import{O as V,d as ce,a as A,e as de,f as Z,g as f}from"./react-router-1d7e2545.js";import{I as We,R as be,A as me,G as ye,a as ve,b as we,S as Ke,c as Je,M as Ne,d as Qe,e as Xe,F as Ze,f as es,g as ss,h as ts,i as as,B as rs,j as os,k as ls,l as Se,m as Ce,n as ns,C as is,o as De,p as xe,q as ke,H as cs,r as ds,s as ms,t as xs}from"./react-icons-1e044944.js";import{c as pe,a as ps}from"./@reduxjs-dc087cf6.js";import{l as us}from"./socket.io-client-5c833305.js";import{u as G}from"./formik-22c91993.js";import{c as Y,a as w,b as Pe,d as Ae,e as hs,f as gs}from"./yup-942be812.js";import{C as Be}from"./react-calendar-0dba7cbc.js";import{h as N}from"./moment-fbc5633a.js";import{_ as I,I as U}from"./react-hot-toast-31eb56b7.js";import{P as Fe}from"./simple-peer-f4b19cd9.js";import{a as h}from"./axios-f0bd56a0.js";/* empty css                       */import{S as js}from"./react-slick-1e39c06b.js";import"./hoist-non-react-statics-23d96a9a.js";import{i as $,$ as Re}from"./@headlessui-3eb086cd.js";import{r as W}from"./react-table-60865d25.js";import{S as fs}from"./sweetalert2-0ba8d528.js";import"./firebase-3a46680f.js";import{i as bs,g as ys,a as ae,u as re,b as oe}from"./@firebase-3147fc5c.js";import{R as ue,A as Te,C as Ee,X as Ie,Y as He,T as he,a as _e,P as vs,b as ws,c as Ns,L as Ss}from"./recharts-2b168312.js";import{v as le}from"./uuid-a960c1f4.js";import{C as Cs,F as Q,S as je,T as Ds,B as ks}from"./antd-8c295b39.js";import"./@babel-6ae3dd9c.js";import"./scheduler-765c72db.js";import"./@remix-run-d753ad9e.js";import"./use-sync-external-store-132023c7.js";import"./node-stdlib-browser-ff393b4c.js";import"./process-78812e81.js";import"./base64-js-50a5cdf9.js";import"./ieee754-44f7831e.js";import"./immer-41fd5235.js";import"./redux-0931380e.js";import"./redux-thunk-ef899f4c.js";import"./engine.io-client-d8f96b0f.js";import"./engine.io-parser-b13552ae.js";import"./@socket.io-3e1df240.js";import"./socket.io-parser-44417fca.js";import"./deepmerge-15f827de.js";import"./lodash-es-9bd48fb4.js";import"./react-fast-compare-853c6d8d.js";import"./tiny-warning-c932d744.js";import"./property-expr-38205fa5.js";import"./tiny-case-d0726479.js";import"./toposort-f83c8c36.js";import"./prop-types-eb83d5f9.js";import"./clsx-1229b3e0.js";import"./get-user-locale-4179b4b6.js";import"./lodash.memoize-b70dc3cd.js";import"./@wojtekmaj-0fa81e45.js";import"./goober-70b4b9ca.js";import"./debug-f8596d14.js";import"./get-browser-rtc-6ca92ae2.js";import"./randombytes-454e9497.js";import"./safe-buffer-6c0cbd26.js";import"./readable-stream-ebe34064.js";import"./events-f5832a60.js";import"./util-ca1ba59c.js";import"./is-arguments-61b8b6fe.js";import"./has-tostringtag-8d69f99b.js";import"./has-symbols-0e5b2b17.js";import"./call-bind-6e78fed6.js";import"./get-intrinsic-bf3ae291.js";import"./has-proto-f7d0b240.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./is-generator-function-72117440.js";import"./which-typed-array-80513630.js";import"./for-each-7354804a.js";import"./is-callable-ff085ac5.js";import"./available-typed-arrays-486be06f.js";import"./gopd-b600775e.js";import"./is-typed-array-77d4720c.js";import"./inherits-2c87d58f.js";import"./util-deprecate-ed892499.js";import"./string_decoder-22417133.js";import"./queue-microtask-158296d6.js";import"./err-code-9b0dd4bc.js";import"./lodash.debounce-fba0b67f.js";import"./classnames-3f11086c.js";import"./resize-observer-polyfill-ec3aa6ed.js";import"./json2mq-d3ccca5e.js";import"./string-convert-c60507dd.js";import"./enquire.js-33edb58f.js";import"./react-is-e8e5dbb3.js";import"./react-resize-detector-27afc2ba.js";import"./lodash-6c0c1263.js";import"./react-smooth-a46363fc.js";import"./fast-equals-a0711cdd.js";import"./victory-vendor-5e3e398c.js";import"./d3-scale-4cce9527.js";import"./internmap-7949acc8.js";import"./d3-array-7d9b19f9.js";import"./d3-time-format-aa787c71.js";import"./d3-time-9ce187c0.js";import"./d3-interpolate-8fa1f6ff.js";import"./d3-color-6502c434.js";import"./d3-format-ffdb8652.js";import"./recharts-scale-170b47f7.js";import"./decimal.js-light-6fe16ef2.js";import"./d3-shape-9e788a4f.js";import"./d3-path-41c4cb36.js";import"./reduce-css-calc-a310372d.js";import"./css-unit-converter-9e08bb2c.js";import"./eventemitter3-d574dec4.js";import"./rc-util-723f3f08.js";import"./@ant-design-6db9f833.js";import"./@emotion-c0b5c018.js";import"./stylis-fad5b415.js";import"./@ctrl-fb5a5473.js";import"./lodash.camelcase-599e1776.js";import"./rc-resize-observer-1f67edaf.js";import"./rc-motion-2472bb43.js";import"./rc-select-17fd8bc3.js";import"./rc-overflow-55c20e5e.js";import"./@rc-component-10b3e8c7.js";import"./rc-virtual-list-728dfb7f.js";import"./rc-picker-aa247c9f.js";import"./dayjs-431a0fe8.js";import"./rc-field-form-0416df07.js";import"./async-validator-d21c09c5.js";import"./scroll-into-view-if-needed-640b7801.js";import"./compute-scroll-into-view-50f8bc03.js";import"./rc-tooltip-b4b1bfc9.js";import"./rc-pagination-fd5fcaf9.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const x of o.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&i(x)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();const Ps=()=>{const{userInfo:s}=P(a=>a.auth);return s&&s.isDoctor?e.jsx(V,{}):e.jsx(ce,{to:"/doctor/login"})},As=()=>{const{userInfo:s}=P(a=>a.auth);return s&&s.isAdmin?e.jsx(V,{}):e.jsx(ce,{to:"/login"})},Bs=()=>{const{userInfo:s}=P(a=>a.auth);return s&&s.isUser?e.jsx(V,{}):e.jsx(ce,{to:"/login"})},Fs=()=>(A(),e.jsx("div",{className:"grid h-screen grid-cols-1 place-items-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-9xl",children:"404"}),e.jsxs("h1",{className:" flex justify-center text-4xl mt-10",children:[e.jsx(We,{}),"Oops! Page not found!"]})]})})),ee=()=>e.jsx(e.Fragment,{children:e.jsx(Fs,{})}),Rs={userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null},$e=pe({name:"auth",initialState:Rs,reducers:{setCredentials:(s,a)=>{s.userInfo=a.payload,localStorage.setItem("userInfo",JSON.stringify(a.payload))},clearCredentials:(s,a)=>{localStorage.removeItem("userInfo"),s.userInfo=null}}}),{setCredentials:se,clearCredentials:ge}=$e.actions,Ts=$e.reducer;function fe(...s){return s.filter(Boolean).join(" ")}function Es({handleShowNavMenu:s}){t.useState(!1);const a=A(),n=q(),{userInfo:i}=P(o=>o.auth),l=async()=>{(await h.get("/api/user/logout")).data.success&&n(ge()),a("/")};return e.jsxs($,{as:"div",className:"relative inline-block text-left",children:[e.jsx("div",{children:e.jsxs($.Button,{className:"inline-flex w-full capitalize justify-center items-center gap bg-white px-3 py-1  font-semibold rounded ring-1 ring-inset ring-primary hover:bg-primary-600 hover:text-white",children:[i.fname," ",i.lname,e.jsx(be,{className:"-mr-1 h-5 w-5 text-xl","aria-hidden":"true"})]})}),e.jsx(Re,{as:t.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsx($.Items,{className:"absolute md:right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsxs("div",{className:"py-1",children:[e.jsx($.Item,{children:({active:o})=>e.jsx(b,{to:"/appointments",onClick:s,className:fe(o?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 "),children:"Appointments"})}),e.jsx($.Item,{children:({active:o})=>e.jsxs("button",{onClick:l,className:fe(o?"bg-gray-100 text-gray-900":"text-gray-700","w-full px-4 py-2 text-left flex gap-1.5 items-center"),children:[e.jsx(me,{className:"font-bold"})," Sign out"]})})]})})})]})}const T=us.connect("http://localhost:5001");T.onerror=s=>{console.error("WebSocket error:",s)};T.onclose=s=>{console.log("WebSocket connection closed with code:",s.code,"reason:",s.reason)};const Is=()=>{const[s,a]=t.useState(),[n,i]=t.useState(!1),l=A(),{userInfo:o}=P(r=>r.auth);t.useEffect(()=>{o&&T.emit("join-room",o==null?void 0:o.id,r=>{})},[o]),t.useEffect(()=>{T.emit("get-my-id",r=>{T.on("call-id",m=>{m&&a(m)})})},[]);const x=()=>{const r=s;a(null),l(`/meet/${r}`)},c=()=>{i(r=>!r)};return e.jsx("div",{className:"z-10 shadow-md w-full fixed top-0 left-0 bg-white",children:e.jsxs("div",{className:"md:flex items-center justify-between bg-white py-1 md:px-10 px-7",children:[e.jsx("div",{className:`font-bold text-md cursor-pointer flex items-center font-[Poppins] 
          text-gray-800`,children:e.jsx(b,{to:"/",className:"text-3xl text-indigo-600 mr-1",children:e.jsx("img",{src:"/assets/logo.png",alt:"DrMeet"})})}),e.jsx("div",{onClick:()=>i(!n),className:"text-2xl font-bold absolute right-8 top-6 cursor-pointer md:hidden",children:n?e.jsx(ye,{}):e.jsx(ve,{})}),e.jsxs("ul",{className:`md:flex md:items-center md:pb-0 pb-12 absolute md:static bg-white md:z-auto z-[-1] left-0 w-full md:w-auto md:pl-0 pl-9 transition-all duration-500 ease-in ${n?"top-18 ":"top-[-490px]"}`,children:[e.jsx("li",{className:"md:ml-6 text-md md:my-0 my-7",children:e.jsx(b,{to:"/",onClick:c,className:"text-gray-800 hover:text-gray-400 duration-500",children:"Home"})},"Home"),e.jsx("li",{className:"md:ml-6 text-md md:my-0 my-7",children:e.jsx(b,{to:"/doctors",onClick:c,className:"text-gray-800 hover:text-gray-400 duration-500",children:"Doctors"})},"Doctors"),!(o!=null&&o.isUser)&&e.jsx("li",{className:"md:ml-6 text-md md:my-0 my-7",children:e.jsx(b,{to:"/doctor",onClick:c,className:"text-gray-800 hover:text-gray-400 duration-500",children:"For Doctor"})},"For Doctor"),o&&o.isUser&&e.jsx("li",{className:"md:ml-6 text-md md:my-0 my-7",children:e.jsx(b,{to:"/dietitian",className:"border border-primary-600 px-2 py-1 rounded text-primary-600 hover:text-white hover:bg-primary-600",onClick:c,children:"AI Dietitian"})}),s&&e.jsx("li",{children:e.jsx("button",{className:"animate-ping text-white bg-primary p-1 rounded ml-6 ",onClick:x,children:"Join"})}),e.jsx("li",{className:"md:ml-6 text-md md:my-0 my-7",children:o&&o.isUser?e.jsx(Es,{handleShowNavMenu:c}):e.jsxs(b,{to:"/login",className:"flex items-center gap-1 text-primary font-bold",children:[e.jsx(we,{className:"text-primary font-bold"})," ",e.jsx("span",{children:"Login"})]})})]})]})})};function B(){return e.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-[3px] border-current border-t-transparent text-primary-600 rounded-full dark:text-white",role:"status","aria-label":"loading",children:e.jsx("span",{className:"sr-only",children:"Loading..."})})}const Hs=()=>{const[s,a]=t.useState(!1),[n,i]=t.useState(),l=A(),o=q(),x=t.useRef();P(r=>r.auth),t.useEffect(()=>{x.current.focus()},[]);const c=G({initialValues:{fname:"",lname:"",email:"",mobile:"",password:"",confirmPassword:""},validationSchema:Y({fname:w().required("Required"),lname:w().required("Required"),email:w().email("Invalid email").required("Required"),mobile:w().required("Required"),password:w().required("Password is required"),confirmPassword:w().required("Passwords must match").oneOf([Pe("password")],"Passwords must match")}),onSubmit:async r=>{a(!0),i("");try{const m=await h.post("/api/user/reg",{...r});o(se({...m.data})),l("/")}catch(m){i(m.response.data.err)}a(!1)}});return e.jsx("div",{className:"min-h-screen py-10",children:e.jsx("div",{className:"container mx-auto flex justify-center",children:e.jsxs("div",{className:"w-fit mx-5 md:w-2/3 rounded md:mx-auto p-10 shadow-xl border-solid border-2 border-primary",children:[e.jsx("img",{src:"/assets/logo.png",className:"mb-4",alt:""}),e.jsx("h2",{className:"text-xl text-primary-600 mb-6 font-semibold ",children:"User Register"}),e.jsxs("form",{onSubmit:c.handleSubmit,children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-3 md:gap-10 mb-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fname",children:"First Name"}),e.jsx("input",{type:"text",name:"fname",id:"fname",ref:x,placeholder:"FirstName",value:c.values.fname,onChange:c.handleChange,onBlur:c.handleBlur}),c.touched.fname&&c.errors.fname&&e.jsx("p",{className:"error",children:c.errors.fname})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"laname",children:"Last Name"}),e.jsx("input",{type:"text",name:"lname",id:"lname",placeholder:"LastName",value:c.values.lname,onChange:c.handleChange,onBlur:c.handleBlur}),c.touched.lname&&c.errors.lname&&e.jsx("p",{className:"error",children:c.errors.lname})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",name:"email",id:"email",placeholder:"Email",value:c.values.email,onChange:c.handleChange,onBlur:c.handleBlur}),c.touched.email&&c.errors.email&&e.jsx("p",{className:"error",children:c.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mobile",children:"Mobile"}),e.jsx("input",{type:"tel",name:"mobile",id:"mobile",placeholder:"Mobile",value:c.values.mobile,onChange:c.handleChange,onBlur:c.handleBlur}),c.touched.mobile&&c.errors.mobile&&e.jsx("p",{className:"error",children:c.errors.mobile})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",name:"password",id:"password",placeholder:"Passowrd",value:c.values.password,onChange:c.handleChange,onBlur:c.handleBlur}),c.touched.password&&c.errors.password&&e.jsx("p",{className:"error",children:c.errors.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{type:"password",name:"confirmPassword",id:"confirmPassword",placeholder:"Passowrd",value:c.values.confirmPassword,onChange:c.handleChange,onBlur:c.handleBlur}),c.touched.confirmPassword&&c.errors.confirmPassword&&e.jsx("p",{className:"error",children:c.errors.confirmPassword})]})]}),s?e.jsx(B,{className:"ps-72"}):e.jsx("button",{className:"mt-4 last:border-2 rounded px-5 py-2  border-primary text-primary hover:bg-primary hover:text-white active:bg-primary active:text-white",type:"submit",children:"Register"}),n&&e.jsx("p",{className:"mx-auto w-full text-center error mt-4 text-xl",children:n})]}),e.jsxs("p",{className:"mt-6",children:["Already Registered? ",e.jsx(b,{to:"/login",className:"text-primary-600",children:"Login"})," "]})]})})})},_s=()=>{const[s,a]=t.useState(!1),[n,i]=t.useState(),l=A(),o=q(),x=t.useRef(),{userInfo:c}=P(m=>m.auth);t.useEffect(()=>{x.current.focus()},[]),t.useEffect(()=>{c&&c.isUser&&l("/")},[c]);const r=G({initialValues:{email:"",password:""},validationSchema:Y({email:w().email("Invalid email").required("Required"),password:w().required("Password is required")}),onSubmit:async m=>{a(!0),i("");try{const p=await h.post("/api/user/auth",{...m});o(se({...p.data})),l("/")}catch(p){i(p.response.data.msg)}a(!1)}});return e.jsx("div",{className:"min-h-screen w-full py-10",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-fit md:w-1/2 rounded-md mx-auto p-10 shadow-xl border-solid border-2 border-primary",children:[e.jsx("img",{src:"/assets/logo.png",className:"mb-4",alt:""}),e.jsx("h2",{className:"text-xl text-primary-600 mb-6 font-semibold ",children:"User Login"}),e.jsxs("form",{onSubmit:r.handleSubmit,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",name:"email",id:"email",ref:x,placeholder:"Email",value:r.values.email,onChange:r.handleChange,onBlur:r.handleBlur}),r.touched.email&&r.errors.email&&e.jsx("p",{className:"error",children:r.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",name:"password",id:"password",placeholder:"Passowrd",value:r.values.password,onChange:r.handleChange,onBlur:r.handleBlur}),r.touched.password&&r.errors.password&&e.jsx("p",{className:"error",children:r.errors.password})]})]}),s?e.jsx(B,{className:"ps-72"}):e.jsx("button",{className:"border-2 rounded px-5 py-2  border-primary text-primary hover:bg-primary hover:text-white active:bg-primary active:text-white",type:"submit",children:"Login"}),n&&e.jsx("p",{className:"mx-auto w-full text-center error mt-4 text-xl",children:n})]}),e.jsxs("p",{className:"mt-6",children:["Not Registered? ",e.jsx(b,{to:"/register",className:"text-primary-600",children:"Register"})," "]})]})})})},$s=()=>e.jsxs("div",{className:"bg-primary-o h-[28rem] overflow-hidden relative",children:[e.jsx("img",{src:"/assets/bg.jpg",className:"mix-blend-overlay object-right object-cover h-full w-full",alt:""}),e.jsxs("div",{className:"absolute top-20 md:top-1/3 px-5 md:start-28 text-black md:w-1/2",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"DrMeet medical service"}),e.jsx("p",{className:"mt-3 mb-8",children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Sed vero tenetur inventore illo voluptas eum, totam id necessitatibus unde tempore, veritatis fuga dolor tempora optio?"}),e.jsx(b,{to:"/doctors",className:"border-primary p-3 px-6 mt-6 text-white text-xl bg-primary hover:bg-primary-600 active:bg-primary-600",children:"Consult"})]})]}),qe=({doctor:s,showBookbutton:a,visibility:n,width:i})=>{const[l,o]=t.useState(a??!0);return e.jsxs("div",{className:`${n} ${i} rounded overflow-hidden shadow-lg bg-white`,children:[e.jsx("div",{className:"h-48 overflow-hidden",children:e.jsx("img",{src:s.image,className:"w-full object-cover ",alt:"Sunset in the mountains"})}),e.jsxs("div",{className:"px-6 py-4 text-center",children:[e.jsxs("h1",{className:"font-bold text-xl",children:["Dr. ",s.fname," ",s.lname]}),e.jsx("p",{children:s.department.name}),e.jsxs("p",{children:["Experience: ",s.experience," yrs"]}),e.jsxs("p",{children:["Fees: â‚¹ ",s.fees]})]}),e.jsxs("div",{className:"px-6 pt-1 pb-4 text-center",children:[l&&e.jsx(b,{to:`/appointment/apply/${s._id}`,className:`border-2 border-primary p-1 px-4 rounded text-emerald-600
        hover:text-white hover:bg-primary active:text-white active:bg-primary`,children:"Book Appointment"}),!l&&e.jsx("p",{className:"text-left",children:s.bio})]})]})},qs=({setDoctors:s})=>{const[a,n]=t.useState(!1),[i,l]=t.useState(),o=G({initialValues:{search:""},validationSchema:Y({search:w()}),onSubmit:async x=>{n(!0),l("");try{const c=await h.get(`/api/user/doctors/search?q=${x.search}`);s(c.data.doctors)}catch(c){l(c.response.data.err)}n(!1)}});return e.jsxs("form",{className:"flex gap-2",onSubmit:o.handleSubmit,children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"search",id:"search",placeholder:"search",value:o.values.search,onChange:o.handleChange,onBlur:o.handleBlur})}),a?e.jsx(B,{className:"ps-72"}):e.jsx("button",{className:"border-2 rounded-xl p-2  border-primary text-primary hover:bg-primary hover:text-white active:bg-primary active:text-white",type:"submit",children:"Search"})]})};const Ms=({schedule:s,id:a})=>{const[n,i]=t.useState(!1),[l,o]=t.useState(a),[x,c]=t.useState([]),[r,m]=t.useState(new Date),[p,g]=t.useState(),[E,H]=t.useState(!1),[u,j]=t.useState(""),[d,v]=t.useState(!1),[F,R]=t.useState(),[y,C]=t.useState(!1);t.useEffect(()=>{c([...s])},[s]);const _=async D=>{j(""),v(!1),C(!0),m(D);try{const S=await h.post("/api/user/schedule/times",{docId:l,date:D});S.data.timesArray&&H(!0),g(S.data.timesArray)}catch{R("Somthing wrong")}C(!1)},L=D=>{j(D.target.value),v(!0)},z=async()=>{i(!0);try{const D=await h.post("/api/stripe/create-checkout-session",{docId:l,date:r,timeId:u});D.data.url&&(window.location.href=D.data.url)}catch{i(!1)}};return e.jsxs("div",{className:"w-full md:w-[40%] lg:w-1/3",children:[e.jsx("h1",{className:"pb-2 text-xl font-semibold",children:"Choose date: "}),e.jsx(Be,{onChange:D=>_(D),value:r,tileDisabled:({date:D})=>!x.includes(D.getDay()),minDate:new Date}),E&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"mt-4 py-1 text-xl font-semibold",children:"Choose Time:"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:p.map((D,S)=>{const M=N(D.startTime),k=M.isBefore(N()),O=N(r).isSame(N(),"date");return e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"time",className:"form-radio h-5 w-5",value:D._id,onChange:L,disabled:O&&k}),e.jsxs("span",{className:`ml-2 ${O&&k?"text-gray-400":""}`,children:[M.format("HH:mm A")," - ",N(D.endTime).format("HH:mm A")]})]},S)})})]}),e.jsx("div",{className:"flex flex-col mt-5",children:d&&(n?e.jsx("div",{className:"flex justify-center",children:e.jsx(B,{})}):e.jsx("button",{onClick:z,className:"bg-primary border-primary border-2 text-white py-2 px-6 rounded hover:bg-primary-600 hover:text-white duration-200",children:"Book Now"}))})]})},Ls=({docSokId:s})=>{const a=A(),[n,i]=t.useState(!1),{userInfo:l}=P(k=>k.auth),[o,x]=t.useState(""),[c,r]=t.useState(),[m,p]=t.useState(!1),[g,E]=t.useState(""),[H,u]=t.useState(),[j,d]=t.useState(!1),[v,F]=t.useState(""),[R,y]=t.useState(!1),[C,_]=t.useState(""),L=t.useRef(),z=t.useRef(),D=t.useRef();t.useEffect(()=>{F(s)},[]),t.useEffect(()=>{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(k=>{r(k),L.current&&(L.current.srcObject=k)}).catch(k=>{console.error("Error accessing media devices:",k)}):console.error("getUserMedia is not supported in this browser."),T.emit("get-my-id",k=>{x(k)}),T.on("callUser",k=>{p(!0),E(k.from),_(k.name),u(k.signal)}),T.on("callEnded",()=>{I.error("Request declined"),setTimeout(()=>{a("/")},1e3)}),_(l.fname+" "+l.lname)},[]);const S=k=>{i(!0);const O=new Fe({initiator:!0,trickle:!1,stream:c});O.on("signal",K=>{T.emit("callUser",{userToCall:k,signalData:K,from:o,name:C})}),O.on("stream",K=>{z.current.srcObject=K}),T.on("callAccepted",K=>{d(!0),O.signal(K)}),D.current=O},M=()=>{y(!0),a("/")};return e.jsxs(e.Fragment,{children:[e.jsx(U,{}),e.jsxs("div",{className:"relative min-h-screen bg-gray-100 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative flex-1 w-full",children:[e.jsx("div",{className:"video absolute bottom-4 right-4 w-48 h-36 bg-black z-10 border border-primary-600",children:c&&e.jsx("video",{playsInline:!0,muted:!0,ref:L,autoPlay:!0,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"video absolute inset-0 bg-black",children:j&&!R?e.jsx("video",{playsInline:!0,ref:z,autoPlay:!0,className:"w-full h-full object-cover"}):null})]}),e.jsxs("div",{className:"relative mt-8",children:[e.jsx("input",{id:"filled-basic",placeholder:"ID to call",value:v,onChange:k=>F(k.target.value),className:"hidden p-2 rounded-md border border-gray-300"}),e.jsx("div",{className:"mt-4",children:j&&!R?e.jsx("button",{className:"absolute w-24 bottom-20 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded",onClick:M,children:"End Call"}):n?e.jsx("button",{className:"absolute  bottom-20 bg-black  font-bold py-2 px-4 rounded",onClick:()=>S(v),children:e.jsx(B,{})}):e.jsx("button",{className:"absolute  bottom-20 bg-primary-600 hover:bg-primary-700 text-white font-bold p-2 rounded",onClick:()=>S(v),children:e.jsx("p",{className:"text-lg w-28",children:"Ask to join"})})})]})]})]})};const Os=()=>e.jsxs("div",{class:"typing-indicator",children:[e.jsx("div",{className:"typing-circle"}),e.jsx("div",{className:"typing-circle"}),e.jsx("div",{className:"typing-circle"}),e.jsx("div",{className:"typing-shadow"}),e.jsx("div",{className:"typing-shadow"}),e.jsx("div",{className:"typing-shadow"})]}),Us=()=>{const s=A(),[a,n]=t.useState(!1),[i,l]=t.useState(""),[o,x]=t.useState([{message:"How can I help you today",sender:"ChatGPT"}]),c=t.useRef(null),r=()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)};t.useEffect(()=>{r()},[o]);const m="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",p={role:"system",content:"Explain like dietition answer only diet related questions"},g=async u=>{if(u.preventDefault(),i.trim()==="")return;const j={message:i,sender:"user",direction:"outgoing"},d=[...o,j];x(d),l(""),n(!0),await E(d)};async function E(u){let j=u.map(v=>{let F="";return v.sender==="ChatGPT"?F="assistant":F="user",{role:F,content:v.message}});const d={model:"gpt-3.5-turbo",messages:[p,...j]};try{const F=await(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer "+m,"Content-Type":"application/json"},body:JSON.stringify(d)})).json();x([...u,{message:F.choices[0].message.content,sender:"ChatGPT"}]),n(!1)}catch(v){console.log(v),s("/dietitian")}}const H=u=>{l(u.target.value)};return e.jsxs("div",{className:"chat-card mt-10 mb-10 flex-grow  bg-white rounded-5 shadow-md  w-4/5 sm:max-w-lg",children:[e.jsx("div",{className:"chat-header p-4 bg-primary flex items-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"text-3xl"}),e.jsx("span",{className:"text-base text-black",children:"Diet Bot"})]})}),e.jsxs("div",{className:"h-full flex flex-col justify-between",children:[e.jsxs("div",{className:"chat-body flex-1 max-h-[calc(100%-80px)] overflow-y-scroll p-4",ref:c,children:[o.map((u,j)=>e.jsx("div",{className:`flex ${u.direction==="outgoing"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`message max-w-[85%] mb-6 p-4  ${u.direction==="outgoing"?"bg-blue-100 rounded-bl-3xl rounded-tl-3xl rounded-tr-xl":"bg-green-200 rounded-br-3xl rounded-tr-3xl rounded-tl-xl"} `,children:e.jsx("p",{className:"text-base text-gray-700",children:u.message})})},j)),a&&e.jsx(Os,{})]}),e.jsxs("form",{className:"chat-footer border p-4 bg-gray-200 flex flex-col sm:flex-row sticky bottom-0 left-0 w-full",children:[e.jsx("input",{className:"flex-grow p-2 border-none rounded-3 mb-2 sm:mb-0 sm:mr-2",type:"text",placeholder:"Type your message",value:i,onChange:H}),e.jsx("button",{className:"p-2  rounded border-none bg-blue-500 text-white font-bold cursor-pointer transition duration-300 hover:bg-green-500",onClick:u=>g(u),children:"Send"})]})]})]})},zs=()=>e.jsxs("div",{id:"aboutUs",className:"w-full flex flex-col items-center py-24 bg-white",children:[e.jsxs("div",{className:"px-4 md:w-3/5 md:px-0 flex text-center flex-col items-center mb-16",children:[e.jsx("h1",{className:"text-4xl font-semibold",children:"About DrMeet"}),e.jsx("div",{className:"w-28 my-4 border-2 border-primary"}),e.jsx("p",{className:"text-lg text-gray-500",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, consectetur adipiscing elit. Fusce vitae risus nec dui venenatis dignissim. Aenean vitae metus in augue pretium ultrices. Duis dictum eget dolor vel blandit."})]}),e.jsxs("div",{className:"w-4/5 flex flex-col md:flex-row justify-between text-gray-500",children:[e.jsxs("div",{className:"flex-1 flex flex-col items-center text-center md:pr-4",children:[e.jsx(Je,{className:"text-7xl"}),e.jsx("h1",{className:"text-2xl font-semibold my-4 text-gray-900",children:"Book an Appointment"}),e.jsx("p",{children:"Make online appointment with your favorite doctor, at your suitable time."})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center text-center md:px-4 mt-8 md:mt-0",children:[e.jsx(Ne,{className:"text-7xl"}),e.jsx("h1",{className:"text-2xl font-semibold my-4 text-gray-900",children:"Consult with a Doctor"}),e.jsx("p",{children:"Share your problems with your doctor from comfort of your home,"})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center text-center md:pl-4 mt-8 md:mt-0",children:[e.jsx(Qe,{className:"text-7xl"}),e.jsx("h1",{className:"text-2xl font-semibold my-4 text-gray-900",children:"Chat with AI Dietitian"}),e.jsx("p",{children:"24/7 chat with our advanced AI clear your diet related doubts"})]})]})]}),Me=()=>e.jsx("div",{className:"bg-primary-100 border-t-2 border-primary-200 mt-10",children:e.jsx("div",{className:"w-4/5 flex justify-center pt-5  mx-auto ",children:e.jsxs("div",{className:"w-full flex flex-col md:flex-row items-start  md:justify-between py-10 text-gray-500",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-700 mb-0 md:mb-3",children:"Location"}),e.jsx("p",{className:"font-semibold",children:"Address:"}),e.jsx("p",{children:"1603 Old York Rd,"}),e.jsx("p",{children:"Houma, LA, 75429"}),e.jsxs("p",{className:"mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Phone:"}),"+91 90876 54321"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-semibold",children:"Fax:"}),"+91 90876 54321"]})]}),e.jsxs("div",{className:"flex-1 mt-3 md:mt-0",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-700 mb-0 md:mb-3",children:"Sitemap"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(b,{className:"hover:text-primary",to:"/",children:"Home"})}),e.jsx("li",{children:e.jsx(b,{className:"hover:text-primary",to:"/doctors",children:"Doctors"})}),e.jsx("li",{children:e.jsx(b,{className:"hover:text-primary",to:"/doctor/login",children:"For Doctors"})}),e.jsx("li",{children:e.jsx("a",{className:"hover:text-primary",href:"#aboutUs",children:"About Us"})})]})]}),e.jsxs("div",{className:"flex-1 mt-3 md:mt-0",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-700 mb-0 md:mb-3",children:"Blog"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Right Blog"}),e.jsx("li",{children:"Left Blog"}),e.jsx("li",{children:"Bottom Blog"}),e.jsx("li",{children:"Top Blog"}),e.jsx("li",{children:"Blog Details"})]})]}),e.jsxs("div",{className:"flex-1 mt-3 md:mt-0",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-700 mb-0 md:mb-3",children:"Appointment"}),e.jsx("p",{className:"w-4/5",children:"Lorem ipsum dolor sit, amet consectetur Ipsa, quis."}),e.jsxs("div",{className:"flex justify-between text-3xl text-primary mt-2 w-4/5",children:[e.jsx(Xe,{}),e.jsx(Ze,{}),e.jsx(es,{}),e.jsx(ss,{}),e.jsx(ts,{})]})]})]})})}),Vs=({department:s})=>e.jsxs("div",{className:"w-full flex-shrink-0 shadow-xl py-4 border-1 my-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:s.image,className:"",alt:s.name})}),e.jsxs("div",{className:"px-6 py-4 text-center",children:[e.jsx("h1",{className:"font-bold text-xl",children:s.name}),e.jsx("p",{children:s.description}),e.jsxs(b,{to:`/doctors?q=${s._id}`,className:"block mt-3 p-1 px-4 rounded text-emerald-600 active:text-white",children:["Consoult now ",">"," "]})]})]}),Gs=()=>{const[s,a]=t.useState(),n=async()=>{const l=await h.get("/api/user/departments");a(l.data.departments)};t.useEffect(()=>{n()},[]);var i={dots:!0,infinite:!1,speed:500,slidesToShow:3,slidesToScroll:3,initialSlide:0,responsive:[{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:2,initialSlide:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]};return e.jsx(e.Fragment,{children:e.jsx("div",{className:" md:flex justify-center py-20",children:e.jsxs("div",{className:"md:w-[90%]",children:[e.jsxs("div",{className:"flex flex-col item-center",children:[e.jsx("h1",{className:"text-4xl font-semibold text-center",children:"Our Specialities"}),e.jsx("div",{className:"w-28 my-4 border-2 border-primary mx-auto"})]}),e.jsx(js,{...i,children:s?s.map((l,o)=>e.jsx("div",{children:e.jsx(Vs,{department:l})},o)):e.jsx("div",{className:"flex flex-wrap gap-5 justify-center my-8",children:e.jsx(B,{})})})]})})})};function Ys(){return e.jsxs(e.Fragment,{children:[e.jsx($s,{}),e.jsx(zs,{}),e.jsx(Gs,{})]})}const Ws=()=>e.jsxs("div",{className:"bg-white",children:[e.jsx(Is,{}),e.jsx("div",{className:"mt-[4.2rem]"}),e.jsx(V,{}),e.jsx(Me,{})]}),Ks=()=>e.jsx(_s,{}),Js=()=>e.jsx(Hs,{}),Qs=()=>{const[s,a]=t.useState(),[n,i]=ze(),l=n.get("q"),o=async()=>{let x;l?x=await h.get(`/api/user/doctors/${l}`):x=await h.get("/api/user/doctors"),a(x.data.doctors)};return t.useEffect(()=>{o()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:" flex flex-wrap justify-between items-center w-full mt-4 mb-6 p-4 px-12 bg-slate-100",children:[e.jsx("h1",{className:"text-xl",children:"Doctors Available"}),e.jsx(qs,{setDoctors:a})]}),s?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5 mx-8 pt-10 pb-14 bg-white",children:s.map((x,c)=>e.jsx(qe,{doctor:x,className:"w-full"},c))}):e.jsx("div",{className:"flex flex-wrap gap-5 justify-center mx-8 mt-12 h-60 bg-white",children:e.jsx(B,{})})]})},Xs=()=>{const[s,a]=t.useState(""),[n,i]=t.useState([]),{id:l}=de(),o=async x=>{var c;try{const[r,m]=await Promise.all([h.get(`/api/user/doctor/${x}`),h.get(`/api/user/doctor/schedule/days/${x}`)]);a(r.data.doctor),i(((c=m.data.days)==null?void 0:c.map(p=>Number(p)))||[])}catch(r){console.error("Error fetching data:",r)}};return t.useEffect(()=>{o(l)},[l]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" flex justify-between items-center w-full mt-4 mb-6 p-4 px-12 bg-slate-100",children:e.jsx("h1",{className:"text-xl",children:"Book appointment"})}),e.jsxs("div",{className:"w-full px-12 mt-8 pt-8 py-14 flex items-start justify-center md:justify-around",children:[s&&e.jsx(qe,{width:"w-1/4",visibility:"invisible md:visible",doctor:s,showBookbutton:!1}),n&&e.jsx(Ms,{schedule:n,id:l})]})]})},Zs=()=>(A(),e.jsxs("div",{className:"grid h-64 grid-cols-1 place-items-center  mt-36",children:[e.jsx(as,{className:"font-extrabold text-primary text-9xl"}),e.jsx("h1",{className:"text-5xl",children:"Appointment Booked Succesfully"}),e.jsx(b,{to:"/appointments",className:"mt-3 rounded bg-primary text-white p-2 px-4 hover:bg-primary-600 focus:hover:bg-primary-600 active:hover:bg-primary-600",children:"Appointments"})]})),et=()=>{const{docSokId:s}=de();return e.jsx(e.Fragment,{children:e.jsx(Ls,{docSokId:s})})},st=({data:s,getUpcomingAppointments:a})=>{const[n,i]=t.useState(N().startOf("day").toISOString()),[l,o]=t.useState(!1),x=async(u,j,d)=>{fs.fire({title:"Are tou sure, you want to cancel the appointment?",showCancelButton:!0,cancelButtonColor:"green",confirmButtonText:"Yes",confirmButtonColor:"red"}).then(v=>{v.isConfirmed&&c(u,j,d)})},c=async(u,j,d)=>{const v=N().startOf("day"),F=N(d).subtract(1,"days");if(v.isBefore(F))try{o(!0);const R=await h.post("/api/stripe/refund",{appointmentId:u,payment_intent:j});R.data.success?(o(!1),I.success(R.data.msg),a(n)):I.error(R.data.msg)}catch{I.error("Error cancelling appointment")}else I.error("Apppointment can only cancelled one day before appointment date")},r=t.useMemo(()=>[{Header:"#",accessor:"rowNumber",Cell:({row:u})=>e.jsx("div",{children:u.index+1})},{Header:"Booking Date",accessor:"createdAt",Cell:({cell:{value:u}})=>N(u).format("YYYY-MM-DD")},{Header:"Doctor",Cell:({cell:{row:u}})=>u.original.docId.fname+" "+u.original.docId.lname},{Header:"Appointmnent Date",accessor:"date",Cell:({cell:{value:u}})=>N(u).format("YYYY-MM-DD")},{Header:"Time",accessor:"timeId.startTime",Cell:({cell:{row:u}})=>N(u.original.timeId.startTime).format("hh:mm a")+" - "+N(u.original.timeId.endTime).format("hh:mm a")},{Header:"Action",accessor:"",Cell:({row:u})=>e.jsx("div",{className:"flex flex-col gap-2",children:e.jsx("button",{className:"inline-block rounded bg-primary px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-sm focus:bg-primary-600 focus:shadow-sm focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-sm",onClick:()=>x(u.original._id,u.original.payment_intent,u.original.date),children:"Cancel"})})}],[]),{getTableProps:m,getTableBodyProps:p,headerGroups:g,rows:E,prepareRow:H}=W.useTable({columns:r,data:s});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mt-10 mx-4 mb-16 overflow-x-auto",children:[e.jsx(U,{}),s&&s.length===0?e.jsx("h1",{className:"mt-10 p-10 font-bold text-3xl",children:"No Upcomming Appointments"}):e.jsx("div",{className:" overflow-x-auto",children:e.jsxs("table",{...m(),className:"text-center w-auto table-auto shadow bg-white",children:[e.jsx("thead",{children:g.map(u=>e.jsx("tr",{...u.getHeaderGroupProps(),style:{borderBottom:"1px solid black"},children:u.headers.map(j=>e.jsx("th",{...j.getHeaderProps(),className:"bg-primary-500 w-fit border text-center px-8 py-2",children:j.render("Header")}))}))}),e.jsx("tbody",{...p(),children:E.map(u=>(H(u),e.jsx("tr",{...u.getRowProps(),className:"even:bg-primary-100 ",children:u.cells.map(j=>e.jsx("td",{...j.getCellProps(),className:"capitalize border-2 px-8 py-2",children:j.render("Cell")}))})))})]})})]})})},tt=()=>{const[s,a]=t.useState(N().startOf("day").toISOString()),[n,i]=t.useState(),[l,o]=t.useState(1),x=async c=>{let r;l===1?r=await h.get("/api/user/appointments"):r=await h.get("/api/user/appointments/all"),i(r.data.appointments)};return t.useEffect(()=>{x()},[s,l]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-wrap",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("ul",{className:"flex mb-0 list-none flex-wrap pt-3 pb-4 flex-row",role:"tablist",children:[e.jsx("li",{className:"-mb-px mr-2 last:mr-0 flex-auto text-center",children:e.jsx("a",{className:"text-xs font-bold uppercase px-5 py-3 shadow-lg rounded block leading-normal "+(l===1?"text-white bg-primary-600":"text-primary-600 bg-white"),onClick:c=>{c.preventDefault(),o(1)},"data-toggle":"tab",href:"#link1",role:"tablist",children:"Coming"})}),e.jsx("li",{className:"-mb-px mr-2 last:mr-0 flex-auto text-center",children:e.jsx("a",{className:"text-xs font-bold uppercase px-5 py-3 shadow-lg rounded block leading-normal "+(l===2?"text-white bg-primary-600":"text-primary-600 bg-white"),onClick:c=>{c.preventDefault(),o(2)},"data-toggle":"tab",href:"#link2",role:"tablist",children:"All"})})]}),e.jsx("div",{className:"relative flex flex-col min-w-0 break-words bg-white w-full mb-6  rounded",children:e.jsx("div",{className:"px-4 py-5 flex-auto",children:e.jsx("div",{className:"tab-content tab-space",children:e.jsx("div",{id:"link1",children:e.jsx("div",{className:"flex justify-center",children:n?e.jsx(st,{data:n,getUpcomingAppointments:x}):e.jsx("div",{className:"my-28",children:e.jsx(B,{})})})})})})})]})})})},at=()=>e.jsx("div",{className:"h-[80vh] items-center  flex flex-col",children:e.jsx(Us,{})}),rt=()=>e.jsx(Z,{children:e.jsxs(f,{path:"/",element:e.jsx(Ws,{}),children:[e.jsx(f,{path:"",element:e.jsx(Ys,{})}),e.jsx(f,{path:"login",element:e.jsx(Ks,{})}),e.jsx(f,{path:"register",element:e.jsx(Js,{})}),e.jsx(f,{path:"doctors",element:e.jsx(Qs,{})}),e.jsx(f,{path:"appointment-success",element:e.jsx(Zs,{})}),e.jsxs(f,{element:e.jsx(Bs,{}),children:[e.jsx(f,{path:"meet/:docSokId",element:e.jsx(et,{})}),e.jsx(f,{path:"dietitian",element:e.jsx(at,{})}),e.jsx(f,{path:"appointment/apply/:id",element:e.jsx(Xs,{})}),e.jsx(f,{path:"appointments",element:e.jsx(tt,{})})]}),e.jsx(f,{path:"*",element:e.jsx(ee,{})})]})});function ot(){const[s,a]=t.useState(!0),[n,i]=t.useState(!1),l=A(),o=q(),x=async()=>{(await h.get("/api/admin/logout")).data.success&&o(ge()),l("/")},c=[{title:"Dashboard",icon:e.jsx(ls,{}),link:"/admin"},{title:"Doctors",icon:e.jsx(Se,{}),link:"#",submenu:!0,submenuItems:[{title:"Doctors",link:"/admin/doctors"},{title:"Requests",link:"/admin/doctor-requests"}]},{title:"Patients",icon:e.jsx(Ce,{}),link:"/admin/patients"},{title:"Departments",icon:e.jsx(ns,{}),link:"/admin/departments"}];return e.jsxs("div",{className:`bg-primary h-screen p-5 pt-8 relative ${s?"w-60":"w-20"} duration-500`,children:[e.jsx(rs,{className:`bg-white text-primary text-3xl rounded-full absolute -right-3 top-9 border border-primary-600 cursor-pointer duration-700 ${!s&&"rotate-180"}`,onClick:()=>a(!s)}),e.jsxs("ul",{children:[c.map((r,m)=>e.jsxs(J.Fragment,{children:[e.jsx("li",{children:e.jsxs(Ve,{to:r.link,className:"text-white flex items-center mb-2 p-2 gap-x-4 cursor-pointer rounded grid-cols-4 hover:bg-primary-600",children:[e.jsx("span",{className:"text-2xl block float-left",children:r.icon}),e.jsx("span",{className:`text-md font-medium ${!s&&"hidden"} `,children:r.title}),r.submenu&&s&&e.jsx(os,{className:`ms-auto ${n&&"rotate-180"}`,onClick:()=>i(!n)})]})}),r.submenu&&n&&s&&e.jsx("ul",{children:r.submenuItems.map((p,g)=>e.jsx("li",{className:"text-white flex items-center mb-1 p-2 ps-10 gap-x-4 cursor-pointer rounded hover:bg-primary-600",children:e.jsx(b,{className:"text-md font-medium",to:p.link,children:p.title})},g))})]},m)),e.jsx("li",{children:e.jsxs("button",{className:"text-white flex items-center mb-2 p-2 gap-x-4 cursor-pointer rounded hover:bg-primary-600",onClick:x,children:[e.jsx("span",{className:"text-2xl block float-left",children:e.jsx(me,{})}),e.jsx("span",{className:`text-md font-medium ${!s&&"hidden"} `,children:"Log Out"})]})})]})]})}function lt(){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"z-10 shadow-md w-full fixed top-0 left-0 bg-white",children:e.jsxs("nav",{className:"flex shadow-md justify-between w-screen px-20",children:[e.jsx("div",{className:"md:flex items-center justify-between bg-white py-2 md:px-10 px-7",children:e.jsx("div",{className:"font-bold text=2x1 cursor-pointer flex items-center text-gray-800",children:e.jsx("img",{src:"/assets/logo.png",alt:"DrMeet"})})}),e.jsx("p",{className:"font-medium text-2xl flex items-center",children:"Admin"})]})})})}function nt(s){const[a,n]=t.useState([]),i=async()=>{const l=await h.get("/api/admin/department");n(l.data.departments)};return t.useEffect(()=>{i()},[s.show]),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"p-10",children:e.jsxs("table",{className:"text-center w-full table-auto shadow-lg bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"bg-primary-500 border text-left px-8 py-4",children:"#"}),e.jsx("th",{className:"bg-primary-500 border text-left px-8 py-4",children:"Name"}),e.jsx("th",{className:"bg-primary-500 border text-left px-8 py-4",children:"Status"}),e.jsx("th",{className:"bg-primary-500 border text-left px-8 py-4",children:"Action"})]})}),e.jsx("tbody",{children:a.map((l,o)=>e.jsxs("tr",{className:"even:bg-primary-100",children:[e.jsx("td",{className:"border px-8 py-4",children:o+1}),e.jsx("td",{className:"border px-8 py-4",children:l.name}),e.jsx("td",{className:"border px-8 py-4",children:e.jsx("button",{className:"border-2 border-primary p-1 px-6 rounded text-emerald-600",children:"active"})}),e.jsx("td",{className:"border px-8 py-4 cursor-pointer text-gray-500",children:e.jsx(is,{className:"mx-auto"})})]},o+1))})]})})})}const it={apiKey:"AIzaSyDgx_hRdivhrQNV7WvI2zW0nmUnNzM9BhU",authDomain:"lifeline-7be58.firebaseapp.com",projectId:"lifeline-7be58",storageBucket:"lifeline-7be58.appspot.com",messagingSenderId:"255377642467",appId:"1:255377642467:web:8dba80a6b746f80ceb06d6",measurementId:"G-ERQ59RH846"},ct=bs(it),ne=ys(ct);function dt(){const[s,a]=t.useState(!1),[n,i]=t.useState(),[l,o]=t.useState(null),[x,c]=t.useState(),r=G({initialValues:{name:"",description:"",image:""},validationSchema:Y({name:w().required("Required"),description:w().required("Required"),image:Ae().required("No image selected")}),onSubmit:async p=>{a(!0);try{c(""),i(""),await m();const g=await h.post("/api/admin/department/add",{...p});i(g.data.msg),p.name="",r.values.description="",r.values.image="",o("")}catch(g){console.error("Axios request error:",g),c(g.response.data.err)}a(!1)}}),m=async()=>{if(!l)return;const p=ae(ne,`departmentAvatar/${l.name+le()}`);await re(p,l);const g=await oe(p);r.values.image=g};return e.jsx("div",{className:"w-[32rem] rounded-xl p-8 mx-14 my-8 shadow-xl border border-primary",children:e.jsxs("form",{onSubmit:r.handleSubmit,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-5 mb-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fname",children:"Name"}),e.jsx("input",{type:"text",name:"name",id:"name",placeholder:"Department Name",value:r.values.name,onChange:r.handleChange,onBlur:r.handleBlur,className:"w-full"}),r.touched.name&&r.errors.name&&e.jsx("p",{className:"error",children:r.errors.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("textarea",{name:"description",id:"description",placeholder:"Description",value:r.values.description,onChange:r.handleChange,onBlur:r.handleBlur,rows:"4",cols:"30"}),r.touched.description&&r.errors.description&&e.jsx("p",{className:"error",children:r.errors.description})]}),e.jsxs("div",{className:"my-5",children:[l&&e.jsx("img",{className:"border-2 rounded-full  border-primary",alt:"Posts",width:"100px",height:"100px",src:`${l?URL.createObjectURL(l):""}`}),e.jsx("input",{type:"file",name:"image",id:"image",onChange:p=>{o(p.target.files[0]),r.setFieldValue("image",p.target.files[0])},onBlur:r.handleBlur}),r.touched.image&&r.errors.image&&e.jsx("p",{className:"error",children:r.errors.image})]})]}),s?e.jsx(B,{className:"ps-72"}):e.jsx("button",{className:"border-2 rounded px-5 py-2  border-primary text-primary hover:bg-primary hover:text-white active:bg-primary active:text-white",type:"submit",children:"Save"}),n&&e.jsx("p",{className:"mx-auto w-full text-center success mt-4 text-xl",children:n}),x&&e.jsx("p",{className:"mx-auto w-full text-center error mt-4 text-xl",children:x})]})})}function mt({setShowModal:s}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:e.jsx("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:e.jsxs("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[e.jsxs("div",{className:"flex items-start justify-between p-5 border-b border-solid border-slate-200 rounded-t",children:[e.jsx("h3",{className:"text-2xl text-primary-600 font-semibold",children:"Add Department"}),e.jsx("button",{onClick:()=>s(a=>!a),children:e.jsx("span",{className:"text-red-500",children:e.jsx(De,{})})})]}),e.jsx(dt,{})]})})}),e.jsx("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]})}const xt=({data:s,handleApprove:a,handleDelete:n})=>{const i=J.useMemo(()=>[{Header:"Image",accessor:"image",Cell:({cell:{value:m}})=>e.jsx("img",{src:m,alt:"User"})},{Header:"FirstName",accessor:"fname"},{Header:"LastName",accessor:"lname"},{Header:"Email",accessor:"email"},{Header:"Mobile",accessor:"mobile"},{Header:"Department",accessor:"department.name"},{Header:"Degree",accessor:"degree"},{Header:"Certificate",accessor:"proof",Cell:({cell:{value:m}})=>e.jsx(e.Fragment,{children:m.map((p,g)=>e.jsxs(b,{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",to:p,target:"_blank",rel:"noopener noreferrer",children:[" Crt-",g+1,", "]},g))})},{Header:"Action",accessor:"_id",Cell:({value:m})=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{className:"inline-block rounded bg-primary px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-primary-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]","data-id":m,onClick:()=>a(m),children:"Approve"}),e.jsx("button",{className:"inline-block rounded bg-red-400 px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-[0_4px_9px_-4px_#3b71ca] transition duration-150 ease-in-out hover:bg-red-600 hover:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:bg-primary-600 focus:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)] focus:outline-none focus:ring-0 active:bg-primary-700 active:shadow-[0_8px_9px_-4px_rgba(59,113,202,0.3),0_4px_18px_0_rgba(59,113,202,0.2)]","data-id":m,onClick:()=>n(m),children:"Reject"})]})}],[]),{getTableProps:l,getTableBodyProps:o,headerGroups:x,rows:c,prepareRow:r}=W.useTable({columns:i,data:s});return e.jsx("div",{className:"overflow-x-auto  p-10",children:e.jsxs("table",{...l(),className:"text-center w-full table-auto shadow-lg bg-white",children:[e.jsx("thead",{children:x.map(m=>e.jsx("tr",{...m.getHeaderGroupProps(),style:{borderBottom:"1px solid black"},children:m.headers.map(p=>e.jsx("th",{...p.getHeaderProps(),className:"bg-primary-500 border text-left px-8 py-4",children:p.render("Header")}))}))}),e.jsx("tbody",{...o(),children:c.map(m=>(r(m),e.jsx("tr",{...m.getRowProps(),className:"even:bg-primary-100",children:m.cells.map(p=>e.jsx("td",{...p.getCellProps(),className:"border-2 px-8 py-4",children:p.render("Cell")}))})))})]})})},pt=({data:s,handleDelete:a})=>{const n=J.useMemo(()=>[{Header:"Image",accessor:"image",Cell:({cell:{value:r}})=>e.jsx("img",{src:r,alt:"User"})},{Header:"FirstName",accessor:"fname"},{Header:"LastName",accessor:"lname"},{Header:"Email",accessor:"email"},{Header:"Mobile",accessor:"mobile"},{Header:"Department",accessor:"department.name"},{Header:"Degree",accessor:"degree"},{Header:"Certificate",accessor:"proof",Cell:({cell:{value:r}})=>e.jsx(e.Fragment,{children:r.map((m,p)=>e.jsxs(b,{className:"underline text-blue-600 hover:text-blue-800 visited:text-purple-600",to:m,target:"_blank",rel:"noopener noreferrer",children:[" Crt-",p+1,", "]},p))})},{Header:"Action",accessor:"_id",Cell:({row:r})=>e.jsx("button",{className:`inline-block rounded ${r.original.blocked?"bg-primary":"bg-red-400"} px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-sm transition duration-150 ease-in-out 
                        ${r.original.blocked?"hover:bg-primary-600":"hover:bg-red-600"} hover:shadow-sm focus:outline-none focus:ring-0 ${r.original.blocked?"active:bg-primary-700":"active:bg-res-700"} active:shadow-sm`,onClick:()=>a(r.original._id),children:`${r.original.blocked?"UnBlock":"Block"}`})}],[]),{getTableProps:i,getTableBodyProps:l,headerGroups:o,rows:x,prepareRow:c}=W.useTable({columns:n,data:s});return e.jsx("div",{className:"overflow-x-auto  p-10",children:e.jsxs("table",{...i(),className:"text-center w-full table-auto shadow-lg bg-white",children:[e.jsx("thead",{children:o.map(r=>e.jsx("tr",{...r.getHeaderGroupProps(),style:{borderBottom:"1px solid black"},children:r.headers.map(m=>e.jsx("th",{...m.getHeaderProps(),className:"bg-primary-500 border text-left px-8 py-4",children:m.render("Header")}))}))}),e.jsx("tbody",{...l(),children:x.map(r=>(c(r),e.jsx("tr",{...r.getRowProps(),className:"even:bg-primary-100",children:r.cells.map(m=>e.jsx("td",{...m.getCellProps(),className:"border-2 px-8 py-4",children:m.render("Cell")}))})))})]})})},ut=({data:s,handleBlock:a})=>{const n=J.useMemo(()=>[{Header:"#",accessor:"rowNumber",Cell:({row:r})=>e.jsx("div",{children:r.index+1})},{Header:"FirstName",accessor:"fname"},{Header:"LastName",accessor:"lname"},{Header:"Email",accessor:"email"},{Header:"Mobile",accessor:"mobile"},{Header:"Action",accessor:"_id",Cell:({row:r})=>e.jsx("button",{className:`inline-block rounded ${r.original.blocked?"bg-primary":"bg-red-400"} px-6 pb-2 pt-2.5 text-xs font-medium uppercase leading-normal text-white shadow-sm transition duration-150 ease-in-out 
                        ${r.original.blocked?"hover:bg-primary-600":"hover:bg-red-600"} hover:shadow-sm focus:outline-none focus:ring-0 ${r.original.blocked?"active:bg-primary-700":"active:bg-res-700"} active:shadow-sm`,onClick:()=>a(r.original._id),children:`${r.original.blocked?"UnBlock":"Block"}`})}],[]),{getTableProps:i,getTableBodyProps:l,headerGroups:o,rows:x,prepareRow:c}=W.useTable({columns:n,data:s});return e.jsx("div",{className:"overflow-x-auto  p-10",children:e.jsxs("table",{...i(),className:"text-center w-full table-auto shadow-lg bg-white",children:[e.jsx("thead",{children:o.map(r=>e.jsx("tr",{...r.getHeaderGroupProps(),style:{borderBottom:"1px solid black"},children:r.headers.map(m=>e.jsx("th",{...m.getHeaderProps(),className:"bg-primary-500 border text-left px-8 py-4",children:m.render("Header")}))}))}),e.jsx("tbody",{...l(),children:x.map(r=>(c(r),e.jsx("tr",{...r.getRowProps(),className:"even:bg-primary-100",children:r.cells.map(m=>e.jsx("td",{...m.getCellProps(),className:"border-2 px-8 py-4",children:m.render("Cell")}))})))})]})})},ht=()=>{const[s,a]=t.useState(0),n=async()=>{const i=await h.get("/api/admin/doctor/count");a(i.data.count)};return t.useEffect(()=>{n()},[]),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4",children:[e.jsx("div",{className:"w-fit p-2 border-2 border-primary-200 rounded-xl mb-3",children:e.jsx(Se,{className:"text-primary text-3xl"})}),e.jsx("p",{className:"text-xl mb-3 font-medium",children:"Doctors"}),e.jsx("p",{className:"text-5xl text-primary-700 font-semibold",children:s})]})},gt=()=>{const[s,a]=t.useState(0),n=async()=>{const i=await h.get("/api/admin/patient/count");a(i.data.count)};return t.useEffect(()=>{n()},[]),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4",children:[e.jsx("div",{className:"w-fit p-2 border-2 border-primary-200 rounded-xl mb-3",children:e.jsx(Ce,{className:"text-primary text-3xl"})}),e.jsx("p",{className:"text-xl mb-3 font-medium",children:"Patients"}),e.jsx("p",{className:"text-5xl text-primary-700 font-semibold",children:s})]})},jt=()=>{const[s,a]=t.useState(0),n=async()=>{const i=await h.get("/api/admin/appointment/count");a(i.data.count)};return t.useEffect(()=>{n()},[]),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4",children:[e.jsx("div",{className:"w-fit p-2 border-2 border-primary-200 rounded-xl mb-3",children:e.jsx(xe,{className:"text-primary text-3xl"})}),e.jsx("p",{className:"text-xl mb-3 font-medium",children:"Appointments"}),e.jsx("p",{className:"text-5xl text-primary-700 font-semibold",children:s})]})},ft=()=>{const[s,a]=t.useState(0),n=async()=>{const i=await h.get("/api/admin/earning");a(i.data.earning)};return t.useEffect(()=>{n()},[]),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 ",children:[e.jsx("div",{className:"w-fit p-2 border-2 border-primary-200 rounded-xl mb-3",children:e.jsx(ke,{className:"text-primary text-3xl"})}),e.jsx("p",{className:"text-xl mb-3 font-medium",children:"Earnings"}),e.jsxs("p",{className:"text-5xl text-primary-700 font-semibold",children:["â‚¹ ",s]})]})},bt=()=>{const[s,a]=t.useState([]),n=async()=>{const i=await h.get("/api/admin/appointments/data");a(i.data.data)};return t.useEffect(()=>{n()},[]),e.jsx("div",{className:"col-span-2 row-span-2",children:e.jsx(ue,{width:"100%",height:"100%",children:e.jsxs(Te,{width:500,height:400,data:s,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx("text",{className:"font-bold",x:120,y:30,textAnchor:"middle",dominantBaseline:"middle",children:"Booking Rate"}),e.jsx(Ee,{strokeDasharray:"3 3"}),e.jsx(Ie,{dataKey:"_id"}),e.jsx(He,{}),e.jsx(he,{}),e.jsx(_e,{type:"monotone",dataKey:"count",stroke:"#8884d8",fill:"#8884d8"})]})})})},X=["#0088FE","#00C49F","#FFBB28","#FF8042"],yt=()=>{const[s,a]=t.useState([]),n=async()=>{const i=await h.get("/api/admin/appointments/weekday/data");a(i.data.data)};return t.useEffect(()=>{n()},[]),e.jsx("div",{className:"col-span-2 row-span-2",children:e.jsx(ue,{width:"100%",height:"100%",children:e.jsxs(vs,{margin:{left:100},children:[e.jsx("text",{className:"font-bold",x:100,y:30,textAnchor:"middle",dominantBaseline:"middle",children:"Appointment/Day"}),e.jsx(ws,{data:s,cx:120,cy:200,innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"count",nameKey:"dayOfWeek",label:"true",children:s.map((i,l)=>e.jsx(Ns,{fill:X[l%X.length]},`cell-${l}`))}),e.jsx(he,{contentStyle:{background:"hsl(168, 50%, 82%)",border:"none",borderRadius:"5px"}}),e.jsx(Ss,{payload:s.map((i,l)=>({id:i.dayOfWeek,type:"wye",value:`${i.dayOfWeek} (${i.count})`,color:X[l%X.length]}))})]})})})};function vt(){return e.jsx("div",{className:"h-full w-full bg-primary-100 px-6 pt-6",children:e.jsxs("div",{className:"grid grid-cols-2  md:grid-cols-4 auto-rows-[minmax(160px,auto)] gap-6 max-h-screen overflow-y-auto",children:[e.jsx(ht,{}),e.jsx(gt,{}),e.jsx(jt,{}),e.jsx(ft,{}),e.jsx(bt,{}),e.jsx(yt,{})]})})}function wt(){const[s,a]=t.useState(!1),[n,i]=t.useState(""),[l,o]=t.useState(!0),[x,c]=t.useState(""),[r,m]=t.useState(!0),[p,g]=t.useState(),E=A(),H=q();P(j=>j.auth);const u=async j=>{j.preventDefault(),a(!0);try{if(n&&x){o(!0),m(!0);const d={email:n,password:x};let v=await h.post("/api/admin/auth",d);H(se({...v.data})),a(!1),v.data.isAdmin&&E("/admin")}else a(!1),n.trim()===""&&o(!1),x.trim()===""&&m(!1)}catch(d){a(!1),g(d.response.data.err)}};return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 ",children:e.jsxs("div",{className:"w-fit md:w-1/4 mx-auto p-4 bg-white rounded shadow-xl border-solid border-2 border-primary",children:[e.jsx("img",{src:"/assets/logo.png",alt:"Logo",className:"w-16 mx-auto mb-4"}),e.jsx("h1",{className:"mb-5 font-bold text-red-800",children:"Admin Login"}),e.jsxs("form",{onSubmit:j=>u(j),children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:n,onChange:j=>{i(j.target.value),o(!0)},className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300"}),!l&&e.jsx("p",{className:"text-red-600 text-sm",children:"Invalid Email"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:x,onChange:j=>{c(j.target.value),m(!0)},className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300"}),!r&&e.jsx("p",{className:"text-red-600 text-sm",children:"Invalid Password"})]}),s?e.jsx("div",{className:"w-full text-center",children:e.jsx(B,{})}):e.jsx("button",{type:"submit",className:"w-full px-4 py-2 text-sm font-medium text-white bg-primary rounded hover:bg-primary-600",children:"Sign In"}),p&&e.jsx("div",{className:"w-full text-center",children:e.jsx("p",{className:"text-red-600 text-sm",children:p})})]})]})})}function Le(s){return e.jsxs("button",{className:`flex items-center gap-2 border-2 border-primary p-2 px-6 rounded text-emerald-600
        hover:text-white hover:bg-primary active:text-white active:bg-primary ${s.pos}`,onClick:()=>s.setShowModal(a=>!a),children:[e.jsx(cs,{})," ",s.text]})}function Nt(){const[s,a]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Le,{pos:"ms-auto mt-6 me-10",text:"Add Department",setShowModal:a}),s&&e.jsx(mt,{setShowModal:a}),e.jsx(nt,{show:s})]})}function St(){return e.jsxs("div",{className:"h-full",children:[e.jsx(lt,{}),e.jsxs("div",{className:"flex mt-20",children:[e.jsx(ot,{}),e.jsx("div",{className:"w-full overflow-x-scroll",children:e.jsx(V,{})})]})]})}function Ct(){const[s,a]=t.useState(""),n=async()=>{const o=await h.get("/api/admin/doctors/unapproved");a(o.data.unapprovedDoctors)};t.useEffect(()=>{n()},[]);const i=async o=>{const x=await h.get(`/api/admin/approve/doctor/${o}`);I.success(x.data.msg),n()},l=async o=>{const x=await h.put(`/api/admin/block/doctor/${o}`);I.success(x.data.msg),n()};return e.jsxs(e.Fragment,{children:[e.jsx(U,{}),s?s.length>0?e.jsx(xt,{data:s,handleApprove:i,handleDelete:l}):e.jsx("p",{className:"w-full font-semibold text-2xl text-center mt-10",children:"No pending Approval Requests"}):e.jsx("div",{className:"w-full h-full grid place-items-center",children:e.jsx(B,{})})]})}function Dt(){const[s,a]=t.useState(""),n=async()=>{const l=await h.get("/api/admin/doctors/approved");a(l.data.appovedDoctors)};t.useEffect(()=>{n()},[]);const i=async l=>{const o=await h.put(`/api/admin/block/doctor/${l}`);I.success(o.data.msg),n()};return e.jsxs(e.Fragment,{children:[e.jsx(U,{}),s?e.jsx(pt,{data:s,handleDelete:i}):e.jsx("div",{className:"w-full h-full grid place-items-center",children:e.jsx(B,{})})]})}function kt(){const[s,a]=t.useState(""),n=async()=>{const l=await h.get("/api/admin/patients/");a(l.data.patients)};t.useEffect(()=>{n()},[]);const i=async l=>{const o=await h.put(`/api/admin/block/patient/${l}`);I.success(o.data.msg),n()};return e.jsxs(e.Fragment,{children:[e.jsx(U,{}),s?e.jsx(ut,{data:s,handleBlock:i}):e.jsx("div",{className:"flex justify-center mt-10",children:e.jsx(B,{})})]})}const Pt=()=>e.jsxs(Z,{children:[e.jsx(f,{path:"/login",element:e.jsx(wt,{})}),e.jsx(f,{path:"/",element:e.jsx(St,{}),children:e.jsxs(f,{element:e.jsx(As,{}),children:[e.jsx(f,{path:"",element:e.jsx(vt,{})}),e.jsx(f,{path:"departments",element:e.jsx(Nt,{})}),e.jsx(f,{path:"doctors",element:e.jsx(Dt,{})}),e.jsx(f,{path:"doctor-requests",element:e.jsx(Ct,{})}),e.jsx(f,{path:"patients",element:e.jsx(kt,{})})]})}),e.jsx(f,{path:"*",element:e.jsx(ee,{})})]}),At={schedules:null},Oe=pe({name:"schedule",initialState:At,reducers:{setSchedules:(s,a)=>{s.schedules=a.payload},clearSchedule:(s,a)=>{s.schedules=null}}}),{setSchedules:ie,clearSchedule:Bt}=Oe.actions,Ft=Oe.reducer;function te(...s){return s.filter(Boolean).join(" ")}function Rt(){const[s,a]=t.useState(!1),n=A(),i=q();P(o=>o.auth);const l=async()=>{(await h.get("/api/doc/logout")).data.success&&i(ge()),i(Bt()),n("/")};return e.jsxs($,{as:"div",className:"relative inline-block text-left",children:[e.jsx("div",{children:e.jsxs($.Button,{className:"inline-flex w-full capitalize justify-center items-center gap  py-1 text font-semibold  hover:bg-gray-50",children:[e.jsx("img",{src:"/assets/dropDown.svg",className:`${s&&"rotate-90"} duration-500`,alt:""}),e.jsx(be,{className:"-mr-1 h-5 w-5 text-xl","aria-hidden":"true"})]})}),e.jsx(Re,{as:t.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsx($.Items,{className:"absolute md:right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:e.jsxs("div",{className:"py-1",children:[e.jsx($.Item,{children:({active:o})=>e.jsx(b,{href:"#",className:te(o?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 "),children:"Support"})}),e.jsx($.Item,{children:({active:o})=>e.jsx(b,{href:"#",className:te(o?"bg-gray-100 text-gray-900":"text-gray-700","block px-4 py-2 "),children:"License"})}),e.jsx($.Item,{children:({active:o})=>e.jsxs("button",{onClick:l,className:te(o?"bg-gray-100 text-gray-900":"text-gray-700","w-full px-4 py-2 text-left flex gap-1.5 items-center"),children:[e.jsx(me,{className:"font-bold"})," Sign out"]})})]})})})]})}const Tt=()=>{const[s,a]=t.useState(!1),{userInfo:n}=P(o=>o.auth);let i=[{name:"Home",link:"/doctor"},{name:"Appointments",link:"/doctor/appointments"},{name:"Schedules",link:"/doctor/schedules"}];const l=()=>{a(o=>!o)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"z-10 shadow-md w-full fixed top-0 left-0",children:e.jsxs("div",{className:"md:flex items-center justify-between bg-white py-1 md:px-10 px-7",children:[e.jsx("div",{className:`font-bold text-md cursor-pointer flex items-center font-[Poppins] 
          text-gray-800`,children:e.jsx(b,{to:"/",className:"text-3xl text-indigo-600 mr-1",children:e.jsx("img",{src:"/assets/logo.png",alt:"DrMeet"})})}),e.jsx("div",{onClick:()=>a(!s),className:"text-2xl font-bold absolute right-8 top-6 cursor-pointer md:hidden",children:s?e.jsx(ye,{}):e.jsx(ve,{})}),e.jsxs("ul",{className:`md:flex md:items-center md:pb-0 pb-12 absolute md:static bg-white md:z-auto z-[-1] left-0 w-full md:w-auto md:pl-0 pl-9 transition-all duration-500 ease-in ${s?"top-18 ":"top-[-490px]"}`,children:[i.map(o=>e.jsx("li",{className:"md:ml-6 text-md md:my-0 my-7",children:e.jsx(b,{to:o.link,onClick:l,className:"text-gray-800 hover:text-gray-400 duration-500",children:o.name})},o.name)),e.jsx("li",{className:"md:ml-6 text-md md:my-0 my-7",children:n&&n.isDoctor?e.jsx(Rt,{}):e.jsxs(b,{to:"/doctor/login",className:"flex items-center gap-1 text-primary font-bold",children:[e.jsx(we,{className:"text-primary font-bold"})," ",e.jsx("span",{children:"Doctor Login"})]})})]})]})}),e.jsx("div",{className:"h-4"})]})};function Et(){const{userInfo:s}=P(y=>y.auth),[a,n]=t.useState(null),[i,l]=t.useState([]),[o,x]=t.useState([]),[c,r]=t.useState(!1),[m,p]=t.useState(),[g,E]=t.useState(),H=A(),u=t.useRef();t.useEffect(()=>{u.current.focus()},[]);const j=async()=>{const y=await h.get("/api/admin/department");x(y.data.departments)};t.useEffect(()=>{s&&s.isDoctor&&H("/doctor")},[]),t.useEffect(()=>{j()},[]);const d=G({initialValues:{fname:"",lname:"",email:"",mobile:"",password:"",confirmPassword:"",department:"",degree:"",image:"",proof:[],experience:"",bio:"",fees:""},validationSchema:Y({fname:w().required("Required"),lname:w().required("Required"),email:w().email("Invalid email").required("Required"),mobile:w().required("Required"),password:w().required("Password is required"),confirmPassword:w().required("Passwords must match").oneOf([Pe("password")],"Passwords must match"),department:w().required("Choose department"),degree:w().required("Required"),proof:hs().min(1,"No certificates selected"),image:Ae().required("No image selected"),experience:gs().required("Number is required").min(0,"Negetive numbers not allowed"),bio:w().required("Bio is required"),fees:w().required("Fees is required")}),onSubmit:async y=>{r(!0),p(""),E(""),await v(),await R();try{const C=await h.post("/api/doc/reg",{...y});E(C.data.msg),setTimeout(()=>{H("/")},1200)}catch(C){p(C.response.data.err),r(!1)}}}),v=async()=>{if(!a)return;const y=ae(ne,`doctorImages/${a.name+le()}`);await re(y,a);const C=await oe(y);d.values.image=C},F=y=>{const C=[...i];for(const _ of y.target.files)C.push(_),d.values.proof.push(_);l(C)},R=async()=>{const y=[];if(i){for(const C of i){const _=ae(ne,`doctorProof/${C.name+le()}`);await re(_,C),y.push(await oe(_))}d.values.proof=[...y]}};return e.jsx("div",{className:"min-h-screen py-10",children:e.jsx("div",{className:"container mx-auto flex justify-center",children:e.jsxs("div",{className:"w-fit mx-5 md:w-8/12 rounded md:mx-auto p-10 shadow-xl border-solid border-2 border-primary",children:[e.jsx("img",{src:"/assets/logo.png",className:"mb-4",alt:""}),e.jsx("h2",{className:"text-xl text-primary-600 mb-6 font-semibold ",children:"Doctor Register Form"}),e.jsxs("form",{onSubmit:d.handleSubmit,children:[e.jsxs("div",{className:"md:grid md:grid-cols-2 md:gap-10 ",children:[e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("label",{htmlFor:"fname",children:"First Name"}),e.jsx("input",{type:"text",name:"fname",id:"fname",ref:u,placeholder:"FirstName",value:d.values.fname,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.fname&&d.errors.fname&&e.jsx("p",{className:"error",children:d.errors.fname})]}),e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("label",{htmlFor:"laname",children:"Last Name"}),e.jsx("input",{type:"text",name:"lname",id:"lname",placeholder:"LastName",value:d.values.lname,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.lname&&d.errors.lname&&e.jsx("p",{className:"error",children:d.errors.lname})]}),e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",name:"email",id:"email",placeholder:"Email",value:d.values.email,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.email&&d.errors.email&&e.jsx("p",{className:"error",children:d.errors.email})]}),e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("label",{htmlFor:"mobile",children:"Mobile"}),e.jsx("input",{type:"tel",name:"mobile",id:"mobile",placeholder:"Mobile",value:d.values.mobile,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.mobile&&d.errors.mobile&&e.jsx("p",{className:"error",children:d.errors.mobile})]}),e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",name:"password",id:"password",placeholder:"Passowrd",value:d.values.password,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.password&&d.errors.password&&e.jsx("p",{className:"error",children:d.errors.password})]}),e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{type:"password",name:"confirmPassword",id:"confirmPassword",placeholder:"Passowrd",value:d.values.confirmPassword,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.confirmPassword&&d.errors.confirmPassword&&e.jsx("p",{className:"error",children:d.errors.confirmPassword})]}),e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("label",{htmlFor:"department",children:"Choose Department"}),e.jsxs("select",{name:"department",id:"department",placeholder:"Choose department",value:d.values.department,onChange:d.handleChange,onBlur:d.handleBlur,children:[e.jsx("option",{value:"",children:"Choose Department.."}),o.map((y,C)=>e.jsx("option",{value:y._id,children:y.name},C))]}),d.touched.department&&d.errors.department&&e.jsx("p",{className:"error",children:d.errors.department})]}),e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("label",{htmlFor:"degree",children:"Degree"}),e.jsx("input",{type:"text",name:"degree",id:"degree",placeholder:"MBBS,MD",value:d.values.degree,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.degree&&d.errors.degree&&e.jsx("p",{className:"error",children:d.errors.degree})]}),e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("label",{htmlFor:"experience",children:"Experience"}),e.jsx("input",{type:"number",name:"experience",id:"experience",placeholder:"Yrs",value:d.values.experience,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.experience&&d.errors.experience&&e.jsx("p",{className:"error",children:d.errors.experience})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"bio",children:"Bio"}),e.jsx("textarea",{className:"w-full border-primary rounded-lg shadow-sm focus:border-primary-600 hover:ring-primary-600",type:"text",name:"bio",id:"bio",placeholder:"Bio",value:d.values.bio,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.bio&&d.errors.bio&&e.jsx("p",{className:"error",children:d.errors.bio})]}),e.jsxs("div",{className:"relative my-5",children:[e.jsx("label",{htmlFor:"proof",children:"Certificate"}),e.jsx(ds,{className:"absolute text-2xl top-14"}),e.jsx("input",{type:"file",name:"proof",id:"proof",multiple:!0,onChange:y=>F(y),onBlur:d.handleBlur,className:"ps-8 mt-8"}),d.touched.proof&&d.errors.proof&&e.jsx("p",{className:"error",children:d.errors.proof})]}),e.jsxs("div",{className:"my-5",children:[e.jsx("img",{className:"border-2 rounded-2xl  border-primary",alt:"Posts",width:"100px",height:"100px",src:`${a?URL.createObjectURL(a):"/assets/avatar.svg"}`}),e.jsx("input",{type:"file",name:"image",id:"image",onChange:y=>{n(y.target.files[0]),d.setFieldValue("image",y.target.files[0])},onBlur:d.handleBlur}),d.touched.image&&d.errors.image&&e.jsx("p",{className:"error",children:d.errors.image})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fees",children:"Fees"}),e.jsx("input",{type:"number",name:"fees",id:"fees",placeholder:"Fees",value:d.values.fees,onChange:d.handleChange,onBlur:d.handleBlur}),d.touched.fees&&d.errors.fees&&e.jsx("p",{className:"error",children:d.errors.fees})]})]}),c?e.jsx("div",{className:"mt-5 ms-3",children:e.jsx(B,{className:""})}):e.jsx("button",{className:"border-2 rounded px-5 py-2 mt-8 border-primary text-primary hover:bg-primary hover:text-white active:bg-primary active:text-white",type:"submit",children:"Register"}),g&&e.jsx("p",{className:"mx-auto w-full text-center text-primary-600 mt-4 text-xl",children:g}),m&&e.jsx("p",{className:"mx-auto w-full text-center error mt-4 text-xl",children:m})]}),e.jsxs("p",{className:"mt-6",children:["Already Registered? ",e.jsx(b,{to:"/doctor/login",className:"text-primary-600",children:"Login"})," "]})]})})})}function It(){const[s,a]=t.useState(!1),[n,i]=t.useState(),l=A(),o=q(),x=t.useRef(),{userInfo:c}=P(m=>m.auth);t.useEffect(()=>{x.current.focus()},[]),t.useEffect(()=>{c&&c.isDoctor&&l("/doctor/")},[]);const r=G({initialValues:{email:"",password:""},validationSchema:Y({email:w().email("Invalid email").required("Required"),password:w().required("Password is required")}),onSubmit:async m=>{a(!0),i("");try{const p=await h.post("/api/doc/auth",{...m});o(se({...p.data})),l("/doctor")}catch(p){i(p.response.data.err)}a(!1)}});return e.jsx("div",{className:"min-h-screen py-10",children:e.jsx("div",{className:"container mx-auto flex justify-center",children:e.jsxs("div",{className:"w-fit  md:w-1/2 rounded p-10 shadow-xl border-solid border-2 border-primary",children:[e.jsx("img",{src:"/assets/logo.png",className:"mb-4",alt:""}),e.jsx("h2",{className:"text-xl text-primary-600 mb-6 font-semibold ",children:"Doctor Login"}),e.jsxs("form",{onSubmit:r.handleSubmit,children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",name:"email",id:"email",ref:x,placeholder:"Email",value:r.values.email,onChange:r.handleChange,onBlur:r.handleBlur}),r.touched.email&&r.errors.email&&e.jsx("p",{className:"error",children:r.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",name:"password",id:"password",placeholder:"Passowrd",value:r.values.password,onChange:r.handleChange,onBlur:r.handleBlur}),r.touched.password&&r.errors.password&&e.jsx("p",{className:"error",children:r.errors.password})]})]}),s?e.jsx(B,{className:"ps-72"}):e.jsx("button",{className:"border-2 rounded px-5 py-2  border-primary text-primary hover:bg-primary hover:text-white active:bg-primary active:text-white",type:"submit",children:"Login"}),n&&e.jsx("p",{className:"mx-auto w-full text-center error mt-4 text-xl",children:n})]}),e.jsxs("p",{className:"mt-6",children:["Not Registered? ",e.jsx(b,{to:"/doctor/register",className:"text-primary-600",children:"Register"})," "]})]})})})}const Ht=({userInfo:s,setShowModal:a})=>e.jsxs("div",{className:"flex flex-col md:flex-row items-center p-4 bg-primary-100 shadow-md m-4 mx-14 rounded ",children:[e.jsxs("div",{className:"flex-1 flex flex-col md:flex-row  gap-6 items-center",children:[e.jsx("img",{src:s.image,alt:"",className:"rounded-full w-36 "}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"font-semibold text-3xl",children:["Dr. ",s.fname," ",s.lname]}),e.jsx("p",{children:s.degree}),e.jsx("p",{className:"text-gray-600",children:s.department}),e.jsxs("p",{className:"mt-2",children:["Experience : ",e.jsxs("span",{className:"",children:[s.experience," yrs"]})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"invisible md:visible",children:s.bio}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mt-2",children:[e.jsx(b,{to:"/doctor/schedules",className:"border-2 border-primary p-2 px-6 rounded text-emerald-600 hover:text-white hover:bg-primary active:text-white active:bg-primary",children:"Schedules"}),e.jsx(b,{to:"/doctor/appointments",className:"border-2 border-primary p-2 px-6 rounded text-emerald-600 hover:text-white hover:bg-primary active:text-white active:bg-primary",children:"Appointments"}),e.jsx(Le,{text:"Add Schedule",setShowModal:a})]})]})]}),_t=()=>{A();const s=q();P(l=>l.schedule);const a=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursay"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],n=async l=>{try{const o=await h.post("/api/doc/schedule",{...l});s(ie(o.data.schedules)),o.data.success?I.success(o.data.msg):I.error(o.data.msg)}catch(o){I.error(o.response.data)}},i=l=>{console.log("Failed:",l)};return e.jsxs(e.Fragment,{children:[e.jsx(U,{}),e.jsx(Cs,{theme:{token:{colorPrimary:"#00b96b"}},children:e.jsxs(Q,{onFinish:n,onFinishFailed:i,children:[e.jsx(Q.Item,{className:"border-primary rounded-lg shadow-sm focus:border-primary-600 hover:ring-primary-600",name:"day",label:"Day",rules:[{required:!0,message:"Please select a day"}],children:e.jsx(je,{placeholder:"Choose day",className:"",children:a.map((l,o)=>e.jsx(je.Option,{value:l.value,children:l.label},o))})}),e.jsx(Q.Item,{label:"Time",name:"time",rules:[{required:!0,message:"Please select a time"}],children:e.jsx(Ds.RangePicker,{})}),e.jsx(Q.Item,{children:e.jsx(ks,{className:` text-[14px] text-center px-3  block  mx-auto border-2 border-primary text-emerald-600
        hover:text-white hover:bg-primary  active:text-white active:bg-primary`,type:"primary",htmlType:"submit",children:"Add Schedule"})})]})})]})},$t=({setShowModal:s})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:e.jsx("div",{className:"relative w-auto my-6 mx-auto max-w-3xl",children:e.jsxs("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[e.jsxs("div",{className:"flex items-start justify-between p-5 border-b border-solid border-slate-200 rounded-t",children:[e.jsx("h3",{className:"text-2xl text-primary-600 font-semibold",children:"Add Schedule"}),e.jsx("button",{onClick:()=>s(a=>!a),children:e.jsx("span",{className:"text-red-500",children:e.jsx(De,{})})})]}),e.jsx("div",{className:"p-8",children:e.jsx(_t,{})})]})})}),e.jsx("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}),qt=({handleDeleteSchedule:s,schedules:a})=>{const n=a,i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=t.useMemo(()=>[{Header:"Day",accessor:"day",Cell:({cell:{value:p}})=>i[p]},{Header:"Time",accessor:"startTime",Cell:({cell:{row:p}})=>N(p.original.startTime).format("h:mm A")+" - "+N(p.original.endTime).format("h:mm A")},{Header:"",accessor:"_id",Cell:({value:p})=>e.jsx("button",{className:"border rounded",onClick:()=>s(p),children:e.jsx(ms,{className:"text-red-800 font-bold"})})}],[]),{getTableProps:o,getTableBodyProps:x,headerGroups:c,rows:r,prepareRow:m}=W.useTable({columns:l,data:n});return e.jsx("div",{className:"w-full  p-10",children:e.jsxs("table",{...o(),className:"text-center w-full table-auto shadow-lg bg-white",children:[e.jsx("thead",{children:c.map(p=>e.jsx("tr",{...p.getHeaderGroupProps(),style:{borderBottom:"1px solid black"},children:p.headers.map(g=>e.jsx("th",{...g.getHeaderProps(),className:" bg-primary-500 border  px-8 py-4",children:g.render("Header")}))}))}),e.jsx("tbody",{...x(),children:r.map(p=>(m(p),e.jsx("tr",{...p.getRowProps(),className:"even:bg-primary-100",children:p.cells.map(g=>e.jsx("td",{...g.getCellProps(),className:"border-2 px-8 py-4",children:g.render("Cell")}))})))})]})})},Mt=({data:s})=>{const a=A(),n=m=>{a(`/doctor/consoltation/${m}`)},i=t.useMemo(()=>[{Header:"#",accessor:"rowNumber",Cell:({row:m})=>e.jsx("div",{children:m.index+1})},{Header:"FirstName",accessor:"patientId.fname"},{Header:"LastName",accessor:"patientId.lname"},{Header:"Mobile",accessor:"patientId.mobile"},{Header:"Time",accessor:"timeId.startTime",Cell:({cell:{row:m}})=>N(m.original.timeId.startTime).format("hh:mm a")+" - "+N(m.original.timeId.endTime).format("hh:mm a")},{Header:"",accessor:"patientId._id",Cell:({value:m})=>e.jsx("button",{className:" rounded",children:e.jsx(Ne,{className:"text-primary text-3xl font-bold",onClick:()=>n(m)})})}],[]),{getTableProps:l,getTableBodyProps:o,headerGroups:x,rows:c,prepareRow:r}=W.useTable({columns:i,data:s});return e.jsx(e.Fragment,{children:s.length===0?e.jsx("h1",{className:"mt-10 p-10 font-bold text-3xl",children:"No Appointments Today"}):e.jsx("div",{className:"p-10 overflow-x-auto",children:e.jsxs("table",{...l(),className:"text-center table-auto shadow-lg bg-white",children:[e.jsx("thead",{children:x.map(m=>e.jsx("tr",{...m.getHeaderGroupProps(),className:"border-b",children:m.headers.map(p=>e.jsx("th",{...p.getHeaderProps(),className:"bg-primary-500 border text-left px-8 py-2",children:p.render("Header")}))}))}),e.jsx("tbody",{...o(),children:c.map((m,p)=>(r(m),e.jsx("tr",{...m.getRowProps(),className:p%2===0?"bg-primary-100":"",children:m.cells.map(g=>e.jsx("td",{...g.getCellProps(),className:"capitalize border px-4 py-2",children:g.render("Cell")}))})))})]})})})};const Lt=({date:s,setDate:a})=>{const[n,i]=t.useState(),l=async()=>{const c=await h.get("/api/doc/appointment/dates");i(c.data.dates.map(r=>N(r.date)))};t.useEffect(()=>{l()},[]);const o=c=>{const r=N(c);return!n.some(m=>m.isSame(r,"day"))},x=c=>{a(N(c).startOf("day"))};return e.jsx("div",{className:"w-full md:w-auto md:flex-grow-0",children:n&&e.jsx(Be,{onChange:c=>x(c),value:s,tileDisabled:({date:c})=>o(c)})})},Ot=({patientId:s})=>{const[a,n]=t.useState(""),[i,l]=t.useState(),[o,x]=t.useState(!1),[c,r]=t.useState(""),[m,p]=t.useState(),[g,E]=t.useState(!1),[H,u]=t.useState(""),[j,d]=t.useState(!1),[v,F]=t.useState(""),R=t.useRef(),y=t.useRef(),C=t.useRef(),_=A();t.useEffect(()=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(S=>{l(S),R.current&&(R.current.srcObject=S)}),T.emit("get-my-id",S=>{n(S)}),T.on("callUser",S=>{x(!0),r(S.from),F(S.name),p(S.signal)}),u(s)},[]),t.useEffect(()=>{T.emit("send-docId",a,s)},[a]);const L=()=>{E(!0);const S=new Fe({initiator:!1,trickle:!1,stream:i});S.on("signal",M=>{T.emit("answerCall",{signal:M,to:c})}),S.on("stream",M=>{y.current.srcObject=M}),S.signal(m),C.current=S},z=()=>{d(!0),_("/doctor/appointments")},D=()=>{d(!0),T.emit("callEnded",{callerId:a,patientId:H}),_("/doctor/appointments")};return e.jsxs("div",{className:"relative min-h-screen bg-gray-100 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative flex-1 w-full ",children:[e.jsx("div",{className:"video absolute bottom-4 right-4 w-48 h-36 bg-black z-10 border border-primary-600",children:i&&e.jsx("video",{playsInline:!0,muted:!0,ref:R,autoPlay:!0,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"video absolute inset-0 bg-black",children:g&&!j?e.jsx("video",{playsInline:!0,ref:y,autoPlay:!0,className:"w-full h-full object-cover"}):null})]}),e.jsx("div",{className:"",children:g&&!j?e.jsx("button",{className:"absolute bottom-10 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded",onClick:z,children:"End Call"}):null}),e.jsx("div",{className:"absolute bottom-20",children:o&&!g?e.jsxs("div",{className:"flex justify-center items-center text-white",children:[e.jsxs("h1",{children:[e.jsx("span",{className:"capitalize font-bold",children:v})," is requesting Permission to join  "]}),e.jsx("button",{className:"ms-3 bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded",onClick:L,children:"Give Permission"}),e.jsx("button",{className:"ms-3 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",onClick:D,children:"Decline"})]}):null})]})},Ut=({setDay:s})=>{const[a,n]=t.useState(N().weekday()),i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=o=>{n(o),s(o)};return e.jsx(e.Fragment,{children:e.jsx("span",{className:" flex flex-wrap justify-center gap-4 bg-white",children:i.map((o,x)=>e.jsx("button",{className:` px-4 py-2 cursor-pointer border border-primary-700 rounded ${a===x?"bg-primary-700 text-white":"text-primary-700"}`,onClick:()=>l(x),children:o},x))})})},zt=()=>{const[s,a]=t.useState(0),n=async()=>{const i=await h.get("/api/doc/appointment/count");a(i.data.count)};return t.useEffect(()=>{n()},[]),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4",children:[e.jsx("div",{className:"w-fit p-2 border-2 border-primary-200 rounded-xl mb-3",children:e.jsx(xe,{className:"text-primary text-3xl"})}),e.jsx("p",{className:"text-xl mb-3 font-medium",children:"Appointments"}),e.jsx("p",{className:"text-5xl text-primary-700 font-semibold",children:s})]})},Vt=()=>{const[s,a]=t.useState(0),n=async()=>{const i=await h.get("/api/doc/earning");a(i.data.earnings)};return t.useEffect(()=>{n()},[]),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 ",children:[e.jsx("div",{className:"w-fit p-2 border-2 border-primary-200 rounded-xl mb-3",children:e.jsx(ke,{className:"text-primary text-3xl"})}),e.jsx("p",{className:"text-xl mb-3 font-medium",children:"Earnings"}),e.jsxs("p",{className:"text-5xl text-primary-700 font-semibold",children:["â‚¹ ",s]})]})},Gt=()=>{const[s,a]=t.useState(0),n=async()=>{const i=await h.get("/api/doc/schedules");a(i.data.data)};return t.useEffect(()=>{n()},[]),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 ",children:[e.jsx("div",{className:"w-fit p-2 border-2 border-primary-200 rounded-xl mb-3",children:e.jsx(xe,{className:"text-primary text-3xl"})}),e.jsx("p",{className:"text-xl mb-3 font-medium",children:"ScheduleDays"}),e.jsxs("p",{className:"text-5xl text-primary-700 font-semibold",children:[" ",s,e.jsx("span",{className:"text-4xl text-gray-500",children:"/7"})]})]})},Yt=()=>{const[s,a]=t.useState(0),n=async()=>{const i=await h.get("/api/doc/slots");a(i.data.count)};return t.useEffect(()=>{n()},[]),e.jsxs("div",{className:"bg-white shadow-md rounded-xl p-4 ",children:[e.jsx("div",{className:"w-fit p-2 border-2 border-primary-200 rounded-xl mb-3",children:e.jsx(xs,{className:"text-primary text-3xl"})}),e.jsx("p",{className:"text-xl mb-3 font-medium",children:"Slots"}),e.jsx("p",{className:"text-5xl text-primary-700 font-semibold",children:s})]})},Wt=()=>{const[s,a]=t.useState([]),n=async()=>{const i=await h.get("/api/doc/appointments/data");a(i.data.data)};return t.useEffect(()=>{n()},[]),e.jsx("div",{className:"col-span-2 row-span-2",children:e.jsx(ue,{width:"100%",height:"100%",children:e.jsxs(Te,{width:500,height:400,data:s,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx("text",{className:"font-bold",x:350,y:30,textAnchor:"middle",dominantBaseline:"middle",children:"Appointment Data"}),e.jsx(Ee,{strokeDasharray:"3 3"}),e.jsx(Ie,{dataKey:"_id"}),e.jsx(He,{}),e.jsx(he,{}),e.jsx(_e,{type:"monotone",dataKey:"count",stroke:"#8884d8",fill:"#8884d8"})]})})})};function Kt(){const[s,a]=t.useState(N().weekday()),n=q(),{schedules:i}=P(x=>x.schedule),l=async()=>{const x=await h.get(`/api/doc/schedule/${s}`);n(ie(x.data.schedules))};t.useEffect(()=>{l()},[s]);const o=async x=>{try{const c=await h.delete(`/api/doc/schedule/${x}`);I.success(c.data.msg),n(ie(c.data.schedules))}catch{I.error(response.data.msg)}};return e.jsxs("div",{className:"flex flex-col justify-center py-10 mb-6",children:[e.jsx(U,{}),e.jsx(Ut,{setDay:a}),(i==null?void 0:i.length)>0?e.jsx(qt,{schedules:i,handleDeleteSchedule:o}):e.jsx("h1",{className:"text-center mt-10 p-10 font-bold text-3xl",children:"No slots scheduled for today"})]})}function Jt(){return e.jsx(It,{})}function Qt(){return e.jsx(e.Fragment,{children:e.jsx(Et,{})})}const Xt=()=>{const[s,a]=t.useState(!1),{userInfo:n}=P(i=>i.auth);return e.jsxs("div",{className:"bg-white",children:[e.jsx(Tt,{}),e.jsx("div",{className:"mt-[4.1rem]"}),n&&n.isDoctor&&e.jsx(Ht,{userInfo:n,setShowModal:a}),s&&e.jsx($t,{setShowModal:a}),e.jsx(V,{}),e.jsx(Me,{})]})},Zt=()=>{const[s,a]=t.useState(N().startOf("day").toISOString()),[n,i]=t.useState([]),l=async o=>{const x=await h.post("/api/doc/appointments",{date:o});i(x.data.appointments)};return t.useEffect(()=>{l(s)},[s]),e.jsx("div",{className:"w-full flex justify-center py-10 mb-6",children:e.jsxs("div",{className:"w-full flex flex-col items-center md:flex-row md:justify-between px-4",children:[e.jsx(Lt,{date:s,setDate:a}),e.jsx("div",{className:"w-full flex justify-center overflow-x-auto mt-4 md:mt-0",children:n?e.jsx(Mt,{data:n}):e.jsx("div",{className:"flex justify-center",children:e.jsx(B,{})})})]})})},ea=()=>{const{patientId:s}=de();return e.jsx("div",{className:"",children:e.jsx(Ot,{patientId:s})})},sa=()=>e.jsx("div",{className:"h-full w-full bg-primary-100 px-6 py-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-2  md:grid-cols-4 auto-rows-[minmax(160px,auto)] gap-6 max-h-screen overflow-y-auto",children:[e.jsx(zt,{}),e.jsx(Gt,{}),e.jsx(Wt,{}),e.jsx(Vt,{}),e.jsx(Yt,{})]})}),ta=()=>e.jsx(Z,{children:e.jsxs(f,{path:"/",element:e.jsx(Xt,{}),children:[e.jsx(f,{path:"login",element:e.jsx(Jt,{})}),e.jsx(f,{path:"register",element:e.jsx(Qt,{})}),e.jsxs(f,{element:e.jsx(Ps,{}),children:[e.jsx(f,{path:"",element:e.jsx(sa,{})}),e.jsx(f,{path:"schedules",element:e.jsx(Kt,{})}),e.jsx(f,{path:"appointments",element:e.jsx(Zt,{})}),e.jsx(f,{path:"consoltation/:patientId",element:e.jsx(ea,{})})]}),e.jsx(f,{path:"*",element:e.jsx(ee,{})})]})});function aa(){return e.jsx(Ge,{children:e.jsxs(Z,{children:[e.jsx(f,{path:"/*",element:e.jsx(rt,{})}),e.jsx(f,{path:"/doctor/*",element:e.jsx(ta,{})}),e.jsx(f,{path:"/admin/*",element:e.jsx(Pt,{})}),e.jsx(f,{path:"*",element:e.jsx(ee,{})})]})})}const ra={data:null},oa=pe({name:"video",initialState:ra,reducers:{setData:(s,a)=>{s.data=a.payload}}}),la=oa.reducer,na=ps({reducer:{auth:Ts,schedule:Ft,video:la},middleware:s=>s(),devTools:!0});Ue.createRoot(document.getElementById("root")).render(e.jsx(Ye,{store:na,children:e.jsx(J.StrictMode,{children:e.jsx(aa,{})})}));
